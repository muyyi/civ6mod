-- 自定义type
INSERT INTO Types 
	(Type, Kind)
VALUES	
	('BUILDING_HF_HOSPITAL', 'KIND_BUILDING'),
	('BUILDING_HF_MED_LAB', 'KIND_BUILDING'),
	('BUILDING_HF_HYDROPOWER_STATION', 'KIND_BUILDING'),
	('MODIFIER_HF_SINGLE_CITY_ADJUST_CITY_YIELD_PER_POPULATION', 'KIND_MODIFIER');

INSERT INTO DynamicModifiers 
	(ModifierType, CollectionType, EffectType)
VALUES	
	('MODIFIER_HF_SINGLE_CITY_ADJUST_CITY_YIELD_PER_POPULATION', 'COLLECTION_OWNER','EFFECT_ADJUST_CITY_YIELD_PER_POPULATION');


-- 3个新建筑
INSERT INTO Buildings
	(BuildingType, Name, Description, PrereqTech, PrereqCivic, PrereqDistrict, RequiresAdjacentRiver, PurchaseYield, Cost, AdvisorType, Maintenance)
VALUES
	('BUILDING_HF_HOSPITAL', 'LOC_BUILDING_HF_HOSPITAL_NAME', 'LOC_BUILDING_HF_HOSPITAL_DESCRIPITON', 'TECH_SCIENTIFIC_THEORY', NULL, 'DISTRICT_CITY_CENTER', 0, 'YIELD_GOLD', 400, 'ADVISOR_GENERIC', 2),
	('BUILDING_HF_MED_LAB', 'LOC_BUILDING_HF_MED_LAB_NAME', 'LOC_BUILDING_HF_MED_LAB_DESCRIPITON', 'TECH_SANITATION', NULL, 'DISTRICT_CITY_CENTER', 0, 'YIELD_GOLD', 600, 'ADVISOR_GENERIC', 3),
	('BUILDING_HF_HYDROPOWER_STATION', 'LOC_BUILDING_HF_HYDROPOWER_STATION_NAME', 'LOC_BUILDING_HF_HYDROPOWER_STATION_DESCRIPITON', 'TECH_ELECTRICITY', NULL, 'DISTRICT_CITY_CENTER', 1, 'YIELD_GOLD', 200, 'ADVISOR_GENERIC', 3);


INSERT INTO Building_YieldChanges
	(BuildingType, YieldType, YieldChange)
VALUES
	('BUILDING_HF_HOSPITAL', 'YIELD_FOOD', 6);

INSERT INTO BuildingPrereqs
	(Building, PrereqBuilding)
VALUES
	('BUILDING_HF_MED_LAB', 'BUILDING_HF_HOSPITAL');


-- modifier
INSERT INTO Requirements
	(RequirementId, RequirementType)
VALUES	('HF_REQ_IMPROVEMENT_IS_PLANTATION', 'REQUIREMENT_PLOT_IMPROVEMENT_TYPE_MATCHES') ,
	('HF_REQ_RESOURCE_IS_IRON', 'REQUIREMENT_PLOT_RESOURCE_TYPE_MATCHES') ,
	('HF_REQ_RESOUECE_IS_COPPER', 'REQUIREMENT_PLOT_RESOURCE_TYPE_MATCHES') ;




INSERT INTO RequirementArguments 
	(RequirementId, Name, Value)
VALUES 	('HF_REQ_IMPROVEMENT_IS_PLANTATION', 'ImprovementType',	'IMPROVEMENT_PLANTATION') ,	
	('HF_REQ_RESOURCE_IS_IRON',	'ResourceType',	'RESOURCE_IRON') ,
	('HF_REQ_RESOUECE_IS_COPPER',	'ResourceType',	'RESOURCE_COPPER') ;



INSERT INTO RequirementSets 
	(RequirementSetId, RequirementSetType)
VALUES 	('HF_REQSET_POT_IS_PLANTATION', 'REQUIREMENTSET_TEST_ALL') ,
	('HF_REQSET_POT_IS_IRON', 'REQUIREMENTSET_TEST_ALL') ,
	('HF_REQSET_POT_IS_COPPER', 'REQUIREMENTSET_TEST_ALL') ;	


INSERT INTO RequirementSetRequirements
	(RequirementSetId,	RequirementId)
VALUES	('HF_REQSET_POT_IS_PLANTATION', 'HF_REQ_IMPROVEMENT_IS_PLANTATION') ,
	-- 已开发过的，必须两个条件(资源类型和有改良都满足)
	('HF_REQSET_POT_IS_IRON', 'HF_REQ_RESOURCE_IS_IRON') ,
	-- 这个条件游戏里本身已经声明了，就不用再去定义了
	('HF_REQSET_POT_IS_IRON', 'REQUIRES_PLOT_HAS_MINE') ,
	('HF_REQSET_POT_IS_COPPER', 'HF_REQ_RESOUECE_IS_COPPER') ;


INSERT INTO Modifiers 
	(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	('HF_BUILDING_GRANARY_PLANTATION_FOOD', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'HF_REQSET_POT_IS_PLANTATION') ,
	('HF_BUILDING_SEWER_FASTER_CITY_GROWTH', 'MODIFIER_SINGLE_CITY_ADJUST_CITY_GROWTH', NULL) ,
	('HF_BUILDING_BARRACKS_IRON_PRODUTION', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'HF_REQSET_POT_IS_IRON') ,
	('HF_BUILDING_BARRACKS_COPPER_PRODUTION', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'HF_REQSET_POT_IS_COPPER') ,
	('HF_BUILDING_STABLE_PASTURE_PRODUTION', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'PLOT_HAS_PASTURE_REQUIREMENTS') ,
	('HF_HOSPITAL_FASTER_CITY_GROWTH', 'MODIFIER_SINGLE_CITY_ADJUST_CITY_GROWTH', NULL) ,
	('BUILDING_HF_MED_LAB_CITIZEN_FOOD', 'MODIFIER_HF_SINGLE_CITY_ADJUST_CITY_YIELD_PER_POPULATION', NULL) ,
	('HF_HYDROPOWER_STATION_RIVER_PRODUCTION', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'PLOT_ADJACENT_TO_RIVER_REQUIREMENTS') ,
	('HF_HYDROPOWER_STATION_CITY_PRODUCTION', 'MODIFIER_SINGLE_CITY_ADJUST_CITY_YIELD_MODIFIER', NULL) ,
	-- WONDER
	('HF_BUILDING_HANGING_GARDENS_CITY_FARM','MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD','PLOT_HAS_FARM_REQUIREMENTS'),
	('HF_BUILDING_HANGING_GARDENS_CITY_PLANTATION','MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD','HF_REQSET_POT_IS_PLANTATION');


INSERT INTO ModifierArguments
	(ModifierId, Name, Value)
VALUES	('HF_BUILDING_GRANARY_PLANTATION_FOOD', 'YieldType', 'YIELD_FOOD'),
	('HF_BUILDING_GRANARY_PLANTATION_FOOD', 'Amount', 1),
	('HF_BUILDING_BARRACKS_IRON_PRODUTION', 'YieldType', 'YIELD_PRODUCTION'),
	('HF_BUILDING_BARRACKS_IRON_PRODUTION', 'Amount', 1),
	('HF_BUILDING_BARRACKS_COPPER_PRODUTION', 'YieldType', 'YIELD_PRODUCTION'),
	('HF_BUILDING_BARRACKS_COPPER_PRODUTION', 'Amount', 1),
	('HF_BUILDING_STABLE_PASTURE_PRODUTION', 'YieldType', 'YIELD_PRODUCTION'),
	('HF_BUILDING_STABLE_PASTURE_PRODUTION', 'Amount', 1),
	('HF_BUILDING_SEWER_FASTER_CITY_GROWTH', 'Amount', 15),
	('HF_HOSPITAL_FASTER_CITY_GROWTH', 'Amount', 20),
	('BUILDING_HF_MED_LAB_CITIZEN_FOOD', 'YieldType', 'YIELD_FOOD') ,
	('BUILDING_HF_MED_LAB_CITIZEN_FOOD', 'Amount', 0.5),
	('HF_HYDROPOWER_STATION_RIVER_PRODUCTION', 'YieldType', 'YIELD_PRODUCTION') ,
	('HF_HYDROPOWER_STATION_RIVER_PRODUCTION', 'Amount', 1),
	('HF_HYDROPOWER_STATION_CITY_PRODUCTION', 'YieldType', 'YIELD_PRODUCTION') ,
	('HF_HYDROPOWER_STATION_CITY_PRODUCTION', 'Amount', 5),
	-- wonder
	('HF_BUILDING_HANGING_GARDENS_CITY_FARM','YieldType','YIELD_FOOD'),
	('HF_BUILDING_HANGING_GARDENS_CITY_FARM','Amount', 1),
	('HF_BUILDING_HANGING_GARDENS_CITY_PLANTATION','YieldType','YIELD_FOOD'),
	('HF_BUILDING_HANGING_GARDENS_CITY_PLANTATION','Amount', 1);


INSERT INTO BuildingModifiers
	(BuildingType, ModifierId)
VALUES	('BUILDING_GRANARY', 'HF_BUILDING_GRANARY_PLANTATION_FOOD'),
	('BUILDING_SEWER', 'HF_BUILDING_SEWER_FASTER_CITY_GROWTH'),
	('BUILDING_BARRACKS', 'HF_BUILDING_BARRACKS_IRON_PRODUTION'),
	('BUILDING_BARRACKS', 'HF_BUILDING_BARRACKS_COPPER_PRODUTION'),
	('BUILDING_STABLE', 'HF_BUILDING_STABLE_PASTURE_PRODUTION'),
	('BUILDING_HF_HOSPITAL', 'HF_HOSPITAL_FASTER_CITY_GROWTH'),
	('BUILDING_HF_MED_LAB', 'BUILDING_HF_MED_LAB_CITIZEN_FOOD'),
	('BUILDING_HF_HYDROPOWER_STATION', 'HF_HYDROPOWER_STATION_RIVER_PRODUCTION'),
	('BUILDING_HF_HYDROPOWER_STATION', 'HF_HYDROPOWER_STATION_CITY_PRODUCTION'),
	('BUILDING_HANGING_GARDENS', 'HF_BUILDING_HANGING_GARDENS_CITY_FARM'),
	('BUILDING_HANGING_GARDENS', 'HF_BUILDING_HANGING_GARDENS_CITY_PLANTATION');


UPDATE Buildings
SET Cost = 75
WHERE BuildingType = 'BUILDING_GRANARY';

-- SEWER
UPDATE Buildings
SET Entertainment = 1
WHERE BuildingType = 'BUILDING_SEWER';

-- AQUEDUCT
UPDATE Districts
SET Appeal = 1
WHERE DistrictType = 'DISTRICT_AQUEDUCT';

-- wonder
UPDATE Building_YieldChanges
SET YieldChange = 5
WHERE BuildingType = 'BUILDING_STONEHENGE';

UPDATE Buildings
SET Housing = 4
WHERE BuildingType = 'BUILDING_HANGING_GARDENS';


-- 圣域增加一个圣遗物槽
INSERT INTO Building_GreatWorks
	(BuildingType,GreatWorkSlotType,NumSlots)
VALUES ('BUILDING_ORACLE','GREATWORKSLOT_RELIC',1);

-- 泰姬陵修改
-- 建成后触发效果降低100点时代点数，增加4个圣遗物槽，生成一个圣遗物，同时为城市增加300%来自圣遗物的产出。
-- 暂时降低产能以方便测试
UPDATE Buildings
SET Cost = 50
WHERE BuildingType = 'BUILDING_TAJ_MAHAL';

-- 增加4个圣遗物槽
INSERT INTO Building_GreatWorks
	(BuildingType,GreatWorkSlotType,NumSlots)
VALUES ('BUILDING_TAJ_MAHAL','GREATWORKSLOT_RELIC',4);

-- 只触发一次降低时代点数的效果
UPDATE Modifiers
SET RunOnce = 1
WHERE ModifierId = 'MODIFIER_PLAYER_ADJUST_PLAYER_ERA_SCORE_PER_PRIDE_MOMENT';

-- 时代点数大于1则触发，降低100
UPDATE ModifierArguments
SET Value = -100
WHERE ModifierId = 'MODIFIER_PLAYER_ADJUST_PLAYER_ERA_SCORE_PER_PRIDE_MOMENT' AND Name = 'Amount';

UPDATE ModifierArguments
SET Value = 1
WHERE ModifierId = 'MODIFIER_PLAYER_ADJUST_PLAYER_ERA_SCORE_PER_PRIDE_MOMENT' AND Name = 'MinScore';


-- 赠送圣遗物和3倍圣遗物产出都有现成的方法。
INSERT INTO BuildingModifiers
	(BuildingType, ModifierId)
VALUES	('BUILDING_TAJ_MAHAL', 'GOODY_CULTURE_GRANT_ONE_RELIC'),
	('BUILDING_TAJ_MAHAL', 'RELIQUARIES_RELIC_FAITH_MODIFIER'),
	('BUILDING_TAJ_MAHAL', 'RELIQUARIES_RELIC_TOURISM');

-- 自由女神像获得建城后直接增加至4人口
INSERT INTO Types 
	(Type, Kind)
VALUES	
	('MODIFIER_HF_PLAYER_BUILT_CITIES_ADD_POPULATION', 'KIND_MODIFIER');

INSERT INTO DynamicModifiers 
	(ModifierType, CollectionType, EffectType)
VALUES	
	('MODIFIER_HF_PLAYER_BUILT_CITIES_ADD_POPULATION', 'COLLECTION_PLAYER_BUILT_CITIES','EFFECT_ADJUST_CITY_POPULATION');

INSERT INTO Modifiers 
	(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	('HF_SETTLER_CITY_EXTRA_POPULATION', 'MODIFIER_HF_PLAYER_BUILT_CITIES_ADD_POPULATION', NULL) ;

INSERT INTO ModifierArguments
	(ModifierId, Name, Value)
VALUES	('HF_SETTLER_CITY_EXTRA_POPULATION', 'Amount', 1),

INSERT INTO BuildingModifiers
	(BuildingType, ModifierId)
VALUES	
	('BUILDING_STATUE_LIBERTY', 'HF_SETTLER_CITY_EXTRA_POPULATION');


-- 写在最后的测试代码(加速首都产出，以测试mod是否生效)
-- UPDATE Building_YieldChanges 
-- SET YieldChange = 30
-- WHERE BuildingType = 'BUILDING_PALACE';