-- 自定义type
-- INSERT INTO Types 
-- 		(Type, Kind)
-- VALUES	
-- 		('MODIFIER_ALICE_DOLL_CORPS_ARMY_MODIFIED_STRENGTH', 'KIND_MODIFIER');

-- INSERT INTO DynamicModifiers 
-- 		(ModifierType, CollectionType, EffectType)
-- VALUES	
-- 		('MODIFIER_ALICE_DOLL_CORPS_ARMY_MODIFIED_STRENGTH', 'COLLECTION_PLAYER_UNITS','EFFECT_ADJUST_CORPS_ARMY_MODIFIED_STRENGTH');

-- Unit SHANGHAI/PENGLAI
-- 蓬莱可以修改改造设施
INSERT INTO Improvement_ValidBuildUnits
		(ImprovementType, UnitType)
SELECT ImprovementType, 'UNIT_PENGLAI'
FROM Improvement_ValidBuildUnits WHERE UnitType = 'UNIT_BUILDER';

-- REQ
INSERT INTO RequirementSets 
		(RequirementSetId, RequirementSetType)
VALUES	
		('REQSET_UNIT_ADJ_DOLL', 'REQUIREMENTSET_TEST_ANY'),
		('REQSET_MELEE_OPPONENT', 'REQUIREMENTSET_TEST_ALL'),	
		('REQSET_UNIT_IS_SHANGHAI', 'REQUIREMENTSET_TEST_ALL'),
		('REQSET_UNIT_IS_PENGLAI', 'REQUIREMENTSET_TEST_ALL');

INSERT INTO Requirements 
		(RequirementId, RequirementType)
VALUES	
		('REQ_UNIT_ADJ_SHANGHAI', 'REQUIREMENT_PLOT_ADJACENT_FRIENDLY_UNIT_TYPE_MATCHES'), 
		('REQ_UNIT_ADJ_PENGLAI', 'REQUIREMENT_PLOT_ADJACENT_FRIENDLY_UNIT_TYPE_MATCHES'), 
		('REQ_MELEE_OPPONENT', 'REQUIREMENT_OPPONENT_UNIT_TAG_MATCHES'), 
		('REQ_UNIT_IS_SHANGHAI', 'REQUIREMENT_UNIT_TYPE_MATCHES'),
		('REQ_UNIT_IS_PENGLAI', 'REQUIREMENT_UNIT_TYPE_MATCHES');

INSERT INTO RequirementSetRequirements
		(RequirementSetId, RequirementId)
VALUES	
		('REQSET_UNIT_ADJ_DOLL', 'REQ_UNIT_ADJ_SHANGHAI'),
		('REQSET_UNIT_ADJ_DOLL', 'REQ_UNIT_ADJ_PENGLAI'),
		('REQSET_MELEE_OPPONENT', 'REQ_MELEE_OPPONENT'),
		('REQSET_UNIT_IS_SHANGHAI', 'REQ_UNIT_IS_SHANGHAI'),
		('REQSET_UNIT_IS_PENGLAI', 'REQ_UNIT_IS_PENGLAI');

INSERT INTO RequirementArguments
		(RequirementId, Name, Value)
VALUES	
		('REQ_UNIT_ADJ_SHANGHAI', 'UnitType', 'UNIT_PENGLAI'),
		('REQ_UNIT_ADJ_PENGLAI', 'UnitType', 'UNIT_SHANGHAI'),
		('REQ_MELEE_OPPONENT', 'Tag', 'CLASS_MELEE'),
		('REQ_UNIT_IS_SHANGHAI', 'UnitType', 'UNIT_SHANGHAI'),
		('REQ_UNIT_IS_PENGLAI', 'UnitType', 'UNIT_PENGLAI');


INSERT INTO Modifiers 
		(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	('TRAIT_DOLL_WONDER_PERCENT', 'MODIFIER_PLAYER_ADJUST_UNIT_WONDER_PERCENT', NULL) ,
		('TRAIT_DOLL_DISTRICT_PERCENT', 'MODIFIER_PLAYER_ADJUST_UNIT_DISTRICT_PERCENT', NULL) ,
		('TRAIT_SHANGHAI_VS_MELEE_BONUS_MODIFIER', 'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH', 'REQSET_MELEE_OPPONENT') ,
		('TRAIT_SHANGHAI_VS_MELEE_BONUS', 'MODIFIER_SINGLE_UNIT_ATTACH_MODIFIER', NULL) ,
		('TRAIT_DOLL_NEIGHBOR_COMBAT_MODIFIER', 'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH', NULL) ,
		('TRAIT_DOLL_NEIGHBOR_COMBAT', 'MODIFIER_SINGLE_UNIT_ATTACH_MODIFIER', 'REQSET_UNIT_ADJ_DOLL') ;

INSERT INTO ModifierArguments
		(ModifierId, Name, Value)
VALUES	('TRAIT_DOLL_WONDER_PERCENT', 'Amount', 5),
		('TRAIT_DOLL_DISTRICT_PERCENT', 'Amount', 5) ,
		('TRAIT_SHANGHAI_VS_MELEE_BONUS_MODIFIER', 'Amount', 10),
		('TRAIT_SHANGHAI_VS_MELEE_BONUS', 'ModifierId', 'TRAIT_SHANGHAI_VS_MELEE_BONUS_MODIFIER'),
		('TRAIT_DOLL_NEIGHBOR_COMBAT_MODIFIER', 'Amount', 10),
		('TRAIT_DOLL_NEIGHBOR_COMBAT', 'ModifierId', 'TRAIT_DOLL_NEIGHBOR_COMBAT_MODIFIER');


INSERT INTO UnitAbilityModifiers
		(UnitAbilityType, ModifierId)
VALUES	
		('ABILITY_DOLL', 'TRAIT_DOLL_WONDER_PERCENT'),
		('ABILITY_DOLL', 'TRAIT_DOLL_DISTRICT_PERCENT'),
		('ABILITY_SHANGHAI', 'TRAIT_SHANGHAI_VS_MELEE_BONUS'),
		('ABILITY_DOLL', 'TRAIT_DOLL_NEIGHBOR_COMBAT');


-- Leader Alice
INSERT INTO Modifiers 
		(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	('TRAIT_DOLL_CORPS_EARLY', 'MODIFIER_PLAYER_CORPS_ARMY_PREREQ', NULL) ,
		('TRAIT_DOLL_ARMIES_EARLY', 'MODIFIER_PLAYER_CORPS_ARMY_PREREQ', NULL),
		('ALICE_PLAYER_CAN_SEE_MASHROOM', 'MODIFIER_PLAYER_GRANT_FREE_RESOURCE_VISIBILITY', NULL);

 
INSERT INTO ModifierArguments
		(ModifierId, Name, Value)
VALUES	('TRAIT_DOLL_CORPS_EARLY', 'Corps', 1),
		('TRAIT_DOLL_CORPS_EARLY', 'Domain', 'DOMAIN_LAND'),
		-- 方便测试，暂改为军事传统后解锁
		('TRAIT_DOLL_CORPS_EARLY', 'CivicType', 'CIVIC_MERCENARIES'),
		('TRAIT_DOLL_ARMIES_EARLY', 'Corps', 0),
		('TRAIT_DOLL_ARMIES_EARLY', 'Domain', 'DOMAIN_LAND'),
		('TRAIT_DOLL_ARMIES_EARLY', 'CivicType', 'CIVIC_NATIONALISM'),
		('ALICE_PLAYER_CAN_SEE_MASHROOM', 'ResourceType', 'RESOURCE_MAGIC_MASHROOM');
					
INSERT INTO TraitModifiers
		(TraitType, ModifierId)
VALUES	('TRAIT_LEADER_DOLL_MASTER',	'TRAIT_DOLL_CORPS_EARLY') ,
		('TRAIT_LEADER_DOLL_MASTER',	'TRAIT_DOLL_ARMIES_EARLY'),
		('TRAIT_LEADER_DOLL_MASTER',	'ALICE_PLAYER_CAN_SEE_MASHROOM');

					
-- Distric DOLL_HOME
INSERT INTO Requirements
	(RequirementId, RequirementType)
VALUES	('REQ_POT_ADJ_DOLL_HOME', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES') ,
		('REQ_POT_ADJ_DOLL_HOME_TIER2', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES') ,
		('REQ_POT_ADJ_DOLL_HOME_TIER3', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES') ;


INSERT INTO RequirementArguments 
	(RequirementId, Name, Value)
VALUES ('REQ_POT_ADJ_DOLL_HOME',	'DistrictType',	'DISTRICT_DOLL_HOME') ,
		('REQ_POT_ADJ_DOLL_HOME',	'MaxRange', '1') ,
		('REQ_POT_ADJ_DOLL_HOME',	'MinRange', '0') ,
		
		('REQ_POT_ADJ_DOLL_HOME_TIER2',	'DistrictType',	'DISTRICT_DOLL_HOME') ,
		('REQ_POT_ADJ_DOLL_HOME_TIER2',	'MaxRange', '2') ,
		('REQ_POT_ADJ_DOLL_HOME_TIER2',	'MinRange', '1') ,	 
		
		('REQ_POT_ADJ_DOLL_HOME_TIER3',	'DistrictType',	'DISTRICT_DOLL_HOME') ,
		('REQ_POT_ADJ_DOLL_HOME_TIER3',	'MaxRange', '3') ,
		('REQ_POT_ADJ_DOLL_HOME_TIER3',	'MinRange', '2') ;
		

INSERT INTO RequirementSets 
	(RequirementSetId, RequirementSetType)

VALUES ('REQSET_POT_ADJ_DOLL_HOME', 'REQUIREMENTSET_TEST_ALL') ,

		('REQSET_POT_ADJ_DOLL_HOME_TIER2', 'REQUIREMENTSET_TEST_ALL') ,
		('REQSET_POT_ADJ_DOLL_HOME_TIER2_ERA', 'REQUIREMENTSET_TEST_ANY') ,
		
		('REQSET_POT_ADJ_DOLL_HOME_TIER3', 'REQUIREMENTSET_TEST_ALL') ,
		('REQSET_POT_ADJ_DOLL_HOME_TIER3_ERA', 'REQUIREMENTSET_TEST_ANY') ;

		
INSERT INTO RequirementSetRequirements
	(RequirementSetId,	RequirementId)

VALUES	('REQSET_POT_ADJ_DOLL_HOME', 'REQ_POT_ADJ_DOLL_HOME') ,
		('REQSET_POT_ADJ_DOLL_HOME_TIER2', 'REQ_POT_ADJ_DOLL_HOME_TIER2') ,
		('REQSET_POT_ADJ_DOLL_HOME_TIER2_ERA', 'PLAYER_HAS_GOV_BUILDING_CITYSTATES_REQUIREMENT') ,
		('REQSET_POT_ADJ_DOLL_HOME_TIER2_ERA', 'PLAYER_HAS_GOV_BUILDING_FAITH_REQUIREMENT') ,
		('REQSET_POT_ADJ_DOLL_HOME_TIER2_ERA', 'PLAYER_HAS_GOV_BUILDING_SPIES_REQUIREMENT') ,
		
		('REQSET_POT_ADJ_DOLL_HOME_TIER3', 'REQ_POT_ADJ_DOLL_HOME_TIER3') ,
		('REQSET_POT_ADJ_DOLL_HOME_TIER3_ERA', 'PLAYER_HAS_GOV_BUILDING_MILITARY_REQUIREMENT') ,
		('REQSET_POT_ADJ_DOLL_HOME_TIER3_ERA', 'PLAYER_HAS_GOV_BUILDING_SCIENCE_REQUIREMENT') ,
		('REQSET_POT_ADJ_DOLL_HOME_TIER3_ERA', 'PLAYER_HAS_GOV_BUILDING_CULTURE_REQUIREMENT') ;
	

INSERT INTO Modifiers 
		(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	
		('DOLL_HOME_PROD_MODIFIER', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'REQSET_POT_ADJ_DOLL_HOME') ,
		('DOLL_HOME_PROD', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', NULL) ,		

		('DOLL_HOME_PROD_TIER2_MODIFIER', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'REQSET_POT_ADJ_DOLL_HOME_TIER2') ,
		('DOLL_HOME_PROD_TIER2', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', 'REQSET_POT_ADJ_DOLL_HOME_TIER2_ERA') ,

		('DOLL_HOME_PROD_TIER3_MODIFIER', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'REQSET_POT_ADJ_DOLL_HOME_TIER3') ,
		('DOLL_HOME_PROD_TIER3', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', 'REQSET_POT_ADJ_DOLL_HOME_TIER3_ERA') ,

		('DOLL_HOME_BASIC_PRODUCTION', 'MODIFIER_PLAYER_DISTRICT_ADJUST_BASE_YIELD_CHANGE', NULL) ,
		('DOLL_HOME_BASIC_CULTURE', 'MODIFIER_PLAYER_DISTRICT_ADJUST_BASE_YIELD_CHANGE', NULL) ,
		('DOLL_HOME_BASIC_SCIENCE', 'MODIFIER_PLAYER_DISTRICT_ADJUST_BASE_YIELD_CHANGE', NULL) ;

		
INSERT INTO ModifierArguments
		(ModifierId, Name, Value)
VALUES	
		('DOLL_HOME_PROD_MODIFIER', 'Amount', '1'),
		('DOLL_HOME_PROD_MODIFIER', 'YieldType', 'YIELD_PRODUCTION') ,
		('DOLL_HOME_PROD', 'ModifierId', 'DOLL_HOME_PROD_MODIFIER')  ,
		
		('DOLL_HOME_PROD_TIER2_MODIFIER', 'Amount',  '1'),
		('DOLL_HOME_PROD_TIER2_MODIFIER', 'YieldType',  'YIELD_PRODUCTION') ,
		('DOLL_HOME_PROD_TIER2', 'ModifierId',  'DOLL_HOME_PROD_TIER2_MODIFIER')  ,		
		
		('DOLL_HOME_PROD_TIER3_MODIFIER', 'Amount',  '1'),
		('DOLL_HOME_PROD_TIER3_MODIFIER', 'YieldType',  'YIELD_PRODUCTION') ,
		('DOLL_HOME_PROD_TIER3', 'ModifierId',  'DOLL_HOME_PROD_TIER3_MODIFIER')  ,

		('DOLL_HOME_BASIC_PRODUCTION', 'Amount',  '2'),
		('DOLL_HOME_BASIC_PRODUCTION', 'YieldType',  'YIELD_PRODUCTION') ,
		('DOLL_HOME_BASIC_CULTURE', 'Amount',  '2'),
		('DOLL_HOME_BASIC_CULTURE', 'YieldType',  'YIELD_CULTURE') ,
		('DOLL_HOME_BASIC_SCIENCE', 'Amount',  '2'),
		('DOLL_HOME_BASIC_SCIENCE', 'YieldType',  'YIELD_SCIENCE') ;


-- 尝试用新的方式来写人偶工房的加成，范围为1，不限时代
-- INSERT INTO Requirements
-- 	(RequirementId, RequirementType)
-- VALUES	
-- ('REQ_POT_ADJ_DOLL_HOME', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES') ;



-- INSERT INTO RequirementArguments 
-- 	(RequirementId, Name, Value)
-- VALUES 
-- ('REQ_POT_ADJ_DOLL_HOME',	'DistrictType',	'DISTRICT_DOLL_HOME'),
-- ('REQ_POT_ADJ_DOLL_HOME',	'MaxRange',	1),
-- ('REQ_POT_ADJ_DOLL_HOME',	'MinRange',	0);

		

-- INSERT INTO RequirementSets 
-- 	(RequirementSetId, RequirementSetType)
-- VALUES 
-- ('REQSET_POT_ADJ_DOLL_HOME', 'REQUIREMENTSET_TEST_ALL') ;

		
-- INSERT INTO RequirementSetRequirements
-- 	(RequirementSetId,	RequirementId)
-- VALUES	
-- ('REQSET_POT_ADJ_DOLL_HOME', 'REQ_POT_ADJ_DOLL_HOME') ;


-- INSERT INTO Modifiers 
-- 		(ModifierId, ModifierType, SubjectRequirementSetId)
-- VALUES	
-- 		('DOLL_HOME_PROD_MODIFIER', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'REQSET_POT_ADJ_DOLL_HOME'),
-- 		('DOLL_HOME_PROD', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', NULL) ;		


-- INSERT INTO ModifierArguments 
-- 		(ModifierId, Name, Value)
-- VALUES	
-- 		('DOLL_HOME_PROD_MODIFIER', 'YieldType', 'YIELD_PRODUCTION'),
-- 		('DOLL_HOME_PROD_MODIFIER', 'Amount', 1),
-- 		('DOLL_HOME_PROD', 'ModifierId', 'DOLL_HOME_PROD_MODIFIER')  ;

		
	
INSERT INTO TraitModifiers
		(TraitType, ModifierId)
VALUES	('TRAIT_LEADER_DOLL_MASTER',	'DOLL_HOME_PROD') ,
		('TRAIT_LEADER_DOLL_MASTER',	'DOLL_HOME_PROD_TIER2') ,
		('TRAIT_LEADER_DOLL_MASTER',	'DOLL_HOME_PROD_TIER3') ;


INSERT INTO DistrictModifiers
		(DistrictType, ModifierId)
VALUES	('DISTRICT_DOLL_HOME',	'DOLL_HOME_BASIC_PRODUCTION') ,
		('DISTRICT_DOLL_HOME',	'DOLL_HOME_BASIC_CULTURE') ,
		('DISTRICT_DOLL_HOME',	'DOLL_HOME_BASIC_SCIENCE') ;

-- Great People
-- God SHENQI
-- CREATE TABLE IF NOT EXISTS HiddenStrategics AS 
-- 	SELECT ResourceType FROM Resources 
-- 	WHERE ResourceClassType="RESOURCECLASS_STRATEGIC" AND PrereqTech IS NOT NULL ;


-- INSERT INTO Modifiers 
-- 	(ModifierId, 	ModifierType, 	RunOnce, Permanent, OwnerRequirementSetId, SubjectRequirementSetId)
-- SELECT	'ALICE_PLAYER_CAN_SEE' || HiddenStrategics.ResourceType, 	'MODIFIER_PLAYER_GRANT_FREE_RESOURCE_VISIBILITY', 1, 1, NULL, NULL
-- 	FROM HiddenStrategics;


-- INSERT INTO ModifierArguments
-- 	(ModifierId, Name, Value)
-- SELECT 'ALICE_PLAYER_CAN_SEE' || HiddenStrategics.ResourceType, 'ResourceType', HiddenStrategics.ResourceType	
-- 	FROM HiddenStrategics;

-- INSERT INTO TraitModifiers
-- 	(TraitType, ModifierId)
-- SELECT 'TRAIT_MAGIC_POWER', 'ALICE_PLAYER_CAN_SEE' || HiddenStrategics.ResourceType
-- 	FROM HiddenStrategics;

-- 可以修建任何改良设施(建议放到最后面以避免游戏崩溃233)
-- INSERT INTO Modifiers 
-- 		(ModifierId, ModifierType, RunOnce, Permanent, OwnerRequirementSetId, SubjectRequirementSetId)
-- SELECT 'ALICE_PLAYER_CAN_BUILD_' || ImprovementType, 'MODIFIER_PLAYER_ADJUST_VALID_IMPROVEMENT', 0, 0, NULL, NULL
-- FROM Improvements;

-- INSERT INTO ModifierArguments
-- 		(ModifierId, Name, Value)
-- SELECT 'ALICE_PLAYER_CAN_BUILD_' || ImprovementType, 'ImprovementType', ImprovementType
-- FROM Improvements;

-- INSERT INTO TraitModifiers
-- 		(TraitType, ModifierId)
-- SELECT 'TRAIT_LEADER_DOLL_MASTER', 'ALICE_PLAYER_CAN_BUILD_' || ImprovementType
-- FROM Improvements;


-- INSERT INTO Modifiers 
-- 		(ModifierId, ModifierType, RunOnce, Permanent, SubjectRequirementSetId)
-- VALUES	
-- 		('SHENQI_GOD_ACTIVE_THREE_RELIC', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, NULL) ,
-- 		('SHENQI_GOD_ACTIVE_RELIC_TOURISM_MODIFIER', 'MODIFIER_PLAYER_CITIES_ADJUST_TOURISM', 1, 1, NULL) ,
-- 		('SHENQI_GOD_ACTIVE_RELIC_CULTURE_BONUS', 'MODIFIER_SINGLE_CITY_GRANT_YIELD_PER_GREAT_WORK', 1, 1, NULL) ,
-- 		('SHENQI_GOD_ACTIVE_RELIC_SCIENCE_BONUS', 'MODIFIER_SINGLE_CITY_GRANT_YIELD_PER_GREAT_WORK', 1, 1, NULL) ;


-- INSERT INTO ModifierArguments 
-- 		(ModifierId, Name, Value)
-- VALUES	
-- 		('SHENQI_GOD_ACTIVE_THREE_RELIC', 'Amount', '3'),
-- 		('SHENQI_GOD_ACTIVE_RELIC_TOURISM_MODIFIER', 'GreatWorkObjectType', 'GREATWORKOBJECT_RELIGIOUS'),
-- 		('SHENQI_GOD_ACTIVE_RELIC_TOURISM_MODIFIER', 'ScalingFactor', 300),

-- 		('SHENQI_GOD_ACTIVE_RELIC_CULTURE_BONUS', 'GreatWorkObjectType', 'GREATWORKOBJECT_RELIGIOUS'),
-- 		('SHENQI_GOD_ACTIVE_RELIC_CULTURE_BONUS', 'YieldType', 'YIELD_CULTURE'),
-- 		('SHENQI_GOD_ACTIVE_RELIC_CULTURE_BONUS', 'Amount', 250),

-- 		('SHENQI_GOD_ACTIVE_RELIC_SCIENCE_BONUS', 'GreatWorkObjectType', 'GREATWORKOBJECT_RELIGIOUS'),
-- 		('SHENQI_GOD_ACTIVE_RELIC_SCIENCE_BONUS', 'YieldType', 'YIELD_SCIENCE'),
-- 		('SHENQI_GOD_ACTIVE_RELIC_SCIENCE_BONUS', 'Amount', 250);

-- 获得和升级伟人
INSERT INTO Requirements
	(RequirementId, RequirementType)
VALUES	('REQ_UNIT_IS_MARISA', 'REQUIREMENT_UNIT_TYPE_MATCHES') ,
		('REQ_UNIT_IS_SHINKI', 'REQUIREMENT_UNIT_TYPE_MATCHES') ;

INSERT INTO RequirementArguments 
	(RequirementId, Name, Value)
VALUES 	('REQ_UNIT_IS_MARISA',	'UnitType',	'UNIT_KIRISAME_MARISA') ,	
		('REQ_UNIT_IS_SHINKI',	'UnitType',	'UNIT_GOD_SHINKI') ;


INSERT INTO RequirementSets 
	(RequirementSetId, RequirementSetType)

VALUES 	('REQSET_UNIT_IS_MARISA', 'REQUIREMENTSET_TEST_ALL') ,
		('REQSET_UNIT_IS_SHINKI', 'REQUIREMENTSET_TEST_ALL') ;	


INSERT INTO RequirementSetRequirements
	(RequirementSetId,	RequirementId)

VALUES	('REQSET_UNIT_IS_MARISA', 'REQ_UNIT_IS_MARISA') ,
		('REQSET_UNIT_IS_SHINKI', 'REQ_UNIT_IS_SHINKI') ;


INSERT INTO Modifiers 
		(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	('PROJECT_GRANT_UNIT_MARISA', 'MODIFIER_SINGLE_CITY_GRANT_UNIT_IN_CITY', NULL) ,
		('PROJECT_GRANT_UNIT_SHANGHAI', 'MODIFIER_SINGLE_CITY_GRANT_UNIT_IN_CITY', NULL) ,
		('PROJECT_UNIT_SHANGHAI_PROMOTION', 'MODIFIER_PLAYER_UNITS_ADJUST_GRANT_EXPERIENCE', 'REQSET_UNIT_IS_SHANGHAI') ,
		('PROJECT_UNIT_MARISA_PROMOTION', 'MODIFIER_PLAYER_UNITS_ADJUST_GRANT_EXPERIENCE', 'REQSET_UNIT_IS_MARISA') ,
		('PROJECT_GRANT_UNIT_SHINKI', 'MODIFIER_SINGLE_CITY_GRANT_UNIT_IN_CITY', NULL) ,
		('PROJECT_UNIT_SHINKI_PROMOTION', 'MODIFIER_PLAYER_UNITS_ADJUST_GRANT_EXPERIENCE', 'REQSET_UNIT_IS_SHINKI');

INSERT INTO ModifierArguments
		(ModifierId, Name, Value)
VALUES	('PROJECT_GRANT_UNIT_MARISA', 'UnitType', 'UNIT_KIRISAME_MARISA'),
		('PROJECT_GRANT_UNIT_MARISA', 'Amount', 1),
		('PROJECT_GRANT_UNIT_SHANGHAI', 'UnitType', 'UNIT_SHANGHAI'),
		('PROJECT_GRANT_UNIT_SHANGHAI', 'Amount', 1),
		('PROJECT_UNIT_SHANGHAI_PROMOTION', 'Amount', -1) ,
		('PROJECT_UNIT_MARISA_PROMOTION', 'Amount', -1) ,
		('PROJECT_GRANT_UNIT_SHINKI', 'UnitType', 'UNIT_GOD_SHINKI'),
		('PROJECT_GRANT_UNIT_SHINKI', 'Amount', 1),
		('PROJECT_UNIT_SHINKI_PROMOTION', 'Amount', -1) ;

INSERT INTO ProjectCompletionModifiers
	(ProjectType, ModifierId)
VALUES	('PROJECT_MARISA_AND_SEX_MUSHROOM', 'PROJECT_GRANT_UNIT_MARISA') ,
-- 测试用，送一个上海，所有城市产能+1
('PROJECT_MARISA_AND_SEX_MUSHROOM', 'PROJECT_GRANT_UNIT_SHANGHAI') ,
('PROJECT_MARISA_AND_SEX_MUSHROOM', 'URBAN_PLANNING_ALLCITYPRODUCTION') ,


('PROJECT_MARISA_AND_SEX_MUSHROOM_1', 'PROJECT_UNIT_MARISA_PROMOTION') ,
('PROJECT_MARISA_AND_SEX_MUSHROOM_1', 'TERRACOTTA_ARMY_LEVEL_UP_UNITS') ,

('PROJECT_MARISA_AND_SEX_MUSHROOM_2', 'PROJECT_UNIT_MARISA_PROMOTION') ,

('PROJECT_MARISA_AND_SEX_MUSHROOM_3', 'PROJECT_UNIT_MARISA_PROMOTION') ,
('PROJECT_MARISA_AND_SEX_MUSHROOM_4', 'PROJECT_UNIT_MARISA_PROMOTION') ,
('PROJECT_MARISA_AND_SEX_MUSHROOM_5', 'PROJECT_UNIT_MARISA_PROMOTION') ,
('PROJECT_MARISA_AND_SEX_MUSHROOM_6', 'PROJECT_UNIT_MARISA_PROMOTION') ,
('PROJECT_RECALL_GOD', 'PROJECT_GRANT_UNIT_SHINKI') ,
('PROJECT_GOD_POWER', 'PROJECT_UNIT_SHINKI_PROMOTION') ;


-- Marisa
INSERT INTO Modifiers 
		(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	('SPY_CHOOSE_SKILL', 'MODIFIER_PLAYER_UNIT_GRANT_UNLIMITED_PROMOTION_CHOICES', NULL) ,
		('MARISA_ADD_TRADE_ROUTE_CAPACITY', 'EFFECT_ADJUST_TRADE_ROUTE_CAPACITY', 'PLAYER_DECLARED_FRIEND') ,
		('MARISA_GRANT_TRADER', 'MODIFIER_SINGLE_CITY_GRANT_UNIT_IN_CITY', 'PLAYER_DECLARED_FRIEND');

INSERT INTO ModifierArguments
		(ModifierId, Name, Value)
VALUES	('SPY_CHOOSE_SKILL', 'UnitType', 'UNIT_SPY'),
		('MARISA_ADD_TRADE_ROUTE_CAPACITY', 'Amount', 1) ,
		('MARISA_GRANT_TRADER', 'UnitType', 'UNIT_TRADER') ,
		('MARISA_GRANT_TRADER', 'Amount', 1);


INSERT INTO UnitPromotionModifiers 
		(UnitPromotionType, ModifierId)
VALUES	('PROMOTION_MARISA_L1L', 'GUNBOATDIPLOMACY_OPENBORDERS') ,
		('PROMOTION_MARISA_L1L', 'GUNBOATDIPLOMACY_INFLUENCEPOINTS') ,
		('PROMOTION_MARISA_L2L', 'UNIQUE_LEADER_ADD_VISIBILITY') ,
		-- 被宣友时，获得一条免费的商路和贸易路线
		('PROMOTION_MARISA_L2L', 'MARISA_ADD_TRADE_ROUTE_CAPACITY') ,
		('PROMOTION_MARISA_L2L', 'MARISA_GRANT_TRADER') ,
		('PROMOTION_MARISA_L3L', 'POTALA_PALACE_DIPLOMATIC_GOVERNMENT_SLOT') ,
		('PROMOTION_MARISA_L1R', 'UNIQUE_LEADER_ADD_SPY_CAPACITY') ,
		('PROMOTION_MARISA_L1R', 'SPY_QUARTERMASTER') ,
		('PROMOTION_MARISA_L2R', 'UNIQUE_LEADER_SPIES_START_PROMOTED') ,
		('PROMOTION_MARISA_L2R', 'SPY_CHOOSE_SKILL') ,
		-- 暂时先将效果改为附赠一个间谍并提高一个间谍容量
		('PROMOTION_MARISA_L3R', 'UNIQUE_LEADER_ADD_SPY_CAPACITY') ,
		('PROMOTION_MARISA_L3R', 'UNIQUE_LEADER_ADD_SPY_UNIT') ,
		-- ('PROMOTION_MARISA_L3R', 'SPY_MARISA') ,
		-- ('PROMOTION_MARISA_L3R', 'SPY_MARISA_GREAT_WORK_HEIST') ,
		-- ('PROMOTION_MARISA_L3R', 'SPY_MARISA_SIPHON_FUND') ,
		-- 暂时先将效果改为从同盟时获得贸易路线，同时双方获得更多贸易加成(Arsenal of Democracy)
		('PROMOTION_MARISA_L4', 'ALLIANCE_ADJUST_PLAYER_TRADE_ROUTE_CAPACITY') ,
		('PROMOTION_MARISA_L4', 'ARSENALOFDEMOCRACY_TRADEROUTEFOODTOALLY') ,
		('PROMOTION_MARISA_L4', 'ARSENALOFDEMOCRACY_TRADEROUTEPRODUCTIONTOALLY') ,
		('PROMOTION_MARISA_L4', 'ARSENALOFDEMOCRACY_TRADEROUTEFOODFROMALLY') ,
		('PROMOTION_MARISA_L4', 'ARSENALOFDEMOCRACY_TRADEROUTEPRODUCTIONFROMALLY') ,
		('PROMOTION_MARISA_L4', 'ARSENALOFDEMOCRACY_ALLIANCEPOINTS') ;

-- Shinki
-- Can see any thing
CREATE TABLE IF NOT EXISTS HiddenStrategics AS 
	SELECT ResourceType FROM Resources 
	WHERE ResourceClassType="RESOURCECLASS_STRATEGIC" AND PrereqTech IS NOT NULL ;


INSERT INTO Modifiers 
	(ModifierId, 	ModifierType, 	RunOnce, Permanent, OwnerRequirementSetId, SubjectRequirementSetId)
SELECT	'ALICE_PLAYER_CAN_SEE' || HiddenStrategics.ResourceType, 	'MODIFIER_PLAYER_GRANT_FREE_RESOURCE_VISIBILITY', 1, 1, NULL, NULL
	FROM HiddenStrategics;


INSERT INTO ModifierArguments
	(ModifierId, Name, Value)
SELECT 'ALICE_PLAYER_CAN_SEE' || HiddenStrategics.ResourceType, 'ResourceType', HiddenStrategics.ResourceType	
	FROM HiddenStrategics;

INSERT INTO UnitPromotionModifiers
	(UnitPromotionType, ModifierId)
SELECT 'PROMOTION_SHINKI_L1', 'ALICE_PLAYER_CAN_SEE' || HiddenStrategics.ResourceType
	FROM HiddenStrategics;


-- Can build any improvement
INSERT INTO Modifiers 
		(ModifierId, ModifierType, RunOnce, Permanent, OwnerRequirementSetId, SubjectRequirementSetId)
SELECT 'ALICE_PLAYER_CAN_BUILD_' || ImprovementType, 'MODIFIER_PLAYER_ADJUST_VALID_IMPROVEMENT', 0, 0, NULL, NULL
FROM Improvements;

INSERT INTO ModifierArguments
		(ModifierId, Name, Value)
SELECT 'ALICE_PLAYER_CAN_BUILD_' || ImprovementType, 'ImprovementType', ImprovementType
FROM Improvements;

INSERT INTO UnitPromotionModifiers
		(UnitPromotionType, ModifierId)
SELECT 'PROMOTION_SHINKI_L2', 'ALICE_PLAYER_CAN_BUILD_' || ImprovementType
FROM Improvements;

-- Some wonder stronger
-- 先随便用2个技能代替试试
INSERT INTO UnitPromotionModifiers
	(UnitPromotionType, ModifierId)
VALUES	('PROMOTION_SHINKI_L3', 'PETRA_DESERT_FOOD') ,
('PROMOTION_SHINKI_L4', 'PETRA_DESERT_GOLD') ;

-- 测试用代码
UPDATE Building_YieldChanges 
SET YieldChange = 50
WHERE BuildingType = 'BUILDING_PALACE';


