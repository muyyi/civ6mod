-- Unit SHANGHAI/PENGLAI
-- 蓬莱可以修改改造设施
INSERT INTO Improvement_ValidBuildUnits
		(ImprovementType, UnitType)
SELECT ImprovementType, 'UNIT_PENGLAI'
FROM Improvement_ValidBuildUnits WHERE UnitType = 'UNIT_BUILDER';



-- REQ
INSERT INTO RequirementSets 
		(RequirementSetId, RequirementSetType)
VALUES	('REQSET_UNIT_ADJ_DOLL', 'REQUIREMENTSET_TEST_ALL'),
		('REQSET_UNIT_IS_SHANGHAI', 'REQUIREMENTSET_TEST_ALL'),
		('REQSET_UNIT_IS_PENGLAI', 'REQUIREMENTSET_TEST_ALL');

INSERT INTO Requirements 
		(RequirementId, RequirementType)
VALUES	('REQ_UNIT_ADJ_DOLL', 'REQUIREMENT_UNIT_TAG_MATCHES'), 
		('REQ_UNIT_IS_SHANGHAI', 'REQUIREMENT_UNIT_TYPE_MATCHES'),
		('REQ_UNIT_IS_PENGLAI', 'REQUIREMENT_UNIT_TYPE_MATCHES');

INSERT INTO RequirementSetRequirements
		(RequirementSetId, RequirementId)
VALUES	('REQSET_UNIT_ADJ_DOLL', 'REQ_UNIT_ADJ_DOLL'),
		('REQSET_UNIT_IS_SHANGHAI', 'REQ_UNIT_IS_SHANGHAI'),
		('REQSET_UNIT_IS_PENGLAI', 'REQ_UNIT_IS_PENGLAI'),

INSERT INTO RequirementArguments
		(RequirementId, Name, Value)
VALUES	('REQ_UNIT_ADJ_SHANGHAI', 'Tag', 'CLASS_DOLL'),
		('REQ_UNIT_IS_SHANGHAI', 'UnitType', 'UNIT_SHANGHAI'),
		('REQ_UNIT_IS_PENGLAI', 'UnitType', 'UNIT_PENGLAI');


INSERT INTO Modifiers 
		(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	('TRAIT_DOLL_WONDER_PERCENT', 'MODIFIER_PLAYER_ADJUST_UNIT_WONDER_PERCENT', NULL) ,
		('TRAIT_DOLL_DISTRICT_PERCENT', 'MODIFIER_PLAYER_ADJUST_UNIT_DISTRICT_PERCENT', NULL) ,
		-- ('TRAIT_SHANGHAI_CORPS_STRENGTH', 'MODIFIER_PLAYER_CORPS_ARMY_MODIFIED_STRENGTH', 'REQSET_UNIT_IS_SHANGHAI') ,
		-- ('TRAIT_SHANGHAI_ARMIES_STRENGTH', 'MODIFIER_PLAYER_CORPS_ARMY_MODIFIED_STRENGTH', 'REQSET_UNIT_IS_SHANGHAI') ,
		-- ('TRAIT_SHANGHAI_MOVE_FAST', 'MODIFIER_PLAYER_UNITS_GRANT_PROMOTION', 'REQSET_UNIT_IS_SHANGHAI') ,
		-- ('TRAIT_PENGLAI_CORPS_STRENGTH', 'MODIFIER_PLAYER_CORPS_ARMY_MODIFIED_STRENGTH', 'REQSET_UNIT_IS_PENGLAI') ,
		-- ('TRAIT_PENGLAI_ARMIES_STRENGTH', 'MODIFIER_PLAYER_CORPS_ARMY_MODIFIED_STRENGTH', 'REQSET_UNIT_IS_PENGLAI') ,
		('TRAIT_PENLAI_STEALTH', 'MODIFIER_PLAYER_UNITS_GRANT_PROMOTION', 'REQSET_UNIT_IS_PENGLAI') ,
		-- 测试，暂时不加条件
		('TRAIT_SHANGHAI_CORPS_STRENGTH', 'MODIFIER_PLAYER_CORPS_ARMY_MODIFIED_STRENGTH', NULL) ,
		('TRAIT_SHANGHAI_ARMIES_STRENGTH', 'MODIFIER_PLAYER_CORPS_ARMY_MODIFIED_STRENGTH', NULL) ,

		('TRAIT_DOLL_NEIGHBOR_COMBAT_MODIFIER', 'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH', NULL) ,
		('TRAIT_DOLL_NEIGHBOR_COMBAT', 'MODIFIER_SINGLE_UNIT_ATTACH_MODIFIER', 'REQSET_UNIT_ADJ_DOLL') ;

INSERT INTO ModifierArguments
		(ModifierId, Name, Value)
VALUES	('TRAIT_DOLL_WONDER_PERCENT', 'Amount', 5),
		('TRAIT_DOLL_DISTRICT_PERCENT', 'Amount', 5) ,
		('TRAIT_SHANGHAI_CORPS_STRENGTH', 'Corps', 1),
		('TRAIT_SHANGHAI_CORPS_STRENGTH', 'Domain', 'DOMAIN_LAND'),
		('TRAIT_SHANGHAI_CORPS_STRENGTH', 'Amount', 15),
		('TRAIT_SHANGHAI_ARMIES_STRENGTH', 'Corps', 0),
		('TRAIT_SHANGHAI_ARMIES_STRENGTH', 'Domain', 'DOMAIN_LAND'),
		('TRAIT_SHANGHAI_ARMIES_STRENGTH', 'Amount', 33),
		-- ('TRAIT_SHANGHAI_MOVE_FAST', 'PromotionType', 'PROMOTION_REDEPLOY'),
		-- ('TRAIT_PENGLAI_CORPS_STRENGTH', 'Corps', 1),
		-- ('TRAIT_PENGLAI_CORPS_STRENGTH', 'Domain', 'DOMAIN_LAND'),
		-- ('TRAIT_PENGLAI_CORPS_STRENGTH', 'Amount', 5),
		-- ('TRAIT_PENGLAI_ARMIES_STRENGTH', 'Corps', 0),
		-- ('TRAIT_PENGLAI_ARMIES_STRENGTH', 'Domain', 'DOMAIN_LAND'),
		-- ('TRAIT_PENGLAI_ARMIES_STRENGTH', 'Amount', 13),
		('TRAIT_PENLAI_STEALTH', 'PromotionType', 'PROMOTION_CAMOUFLAGE'),
		('TRAIT_DOLL_NEIGHBOR_COMBAT_MODIFIER', 'Amount', 5),
		('TRAIT_DOLL_NEIGHBOR_COMBAT', 'ModifierId', 'TRAIT_DOLL_NEIGHBOR_COMBAT_MODIFIER');


INSERT INTO UnitAbilityModifiers
		(UnitAbilityType, ModifierId)
VALUES	
		-- 正确的方式应该是绑定到相应的领袖而非UnitAbilityModifiers上
		-- ('ABILITY_SHANGHAI', 'TRAIT_SHANGHAI_CORPS_STRENGTH'),
		-- ('ABILITY_SHANGHAI', 'TRAIT_SHANGHAI_ARMIES_STRENGTH'),
		-- ('ABILITY_SHANGHAI', 'TRAIT_SHANGHAI_MOVE_FAST'),
		-- ('ABILITY_PENGLAI', 'TRAIT_PENGLAI_CORPS_STRENGTH'),
		-- ('ABILITY_PENGLAI', 'TRAIT_PENGLAI_ARMIES_STRENGTH'),
		-- ('ABILITY_PENGLAI', 'TRAIT_PENLAI_STEALTH'),
		('ABILITY_DOLL', 'TRAIT_DOLL_WONDER_PERCENT'),
		('ABILITY_DOLL', 'TRAIT_DOLL_DISTRICT_PERCENT'),
		('ABILITY_DOLL', 'TRAIT_DOLL_NEIGHBOR_COMBAT');


-- Leader Alice
INSERT INTO Modifiers 
		(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	('TRAIT_DOLL_CORPS_EARLY', 'MODIFIER_PLAYER_CORPS_ARMY_PREREQ', NULL) ,
		('TRAIT_DOLL_ARMIES_EARLY', 'MODIFIER_PLAYER_CORPS_ARMY_PREREQ', NULL) ;
 
INSERT INTO ModifierArguments
		(ModifierId, Name, Value)
VALUES	('TRAIT_DOLL_CORPS_EARLY', 'Corps', 1),
		('TRAIT_DOLL_CORPS_EARLY', 'Domain', 'DOMAIN_LAND'),
		-- 方便测试，暂改为军事传统后解锁
		('TRAIT_DOLL_CORPS_EARLY', 'CivicType', 'CIVIC_MILITARY_TRADITION'),
		('TRAIT_DOLL_ARMIES_EARLY', 'Corps', 0),
		('TRAIT_DOLL_ARMIES_EARLY', 'Domain', 'DOMAIN_LAND'),
		('TRAIT_DOLL_ARMIES_EARLY', 'CivicType', 'CIVIC_NATIONALISM');
					
INSERT INTO TraitModifiers
		(TraitType, ModifierId)
VALUES	('TRAIT_LEADER_DOLL_MASTER',	'TRAIT_DOLL_CORPS_EARLY') ,
		('TRAIT_LEADER_DOLL_MASTER',	'TRAIT_DOLL_ARMIES_EARLY'),
		('TRAIT_LEADER_DOLL_MASTER', 'TRAIT_SHANGHAI_CORPS_STRENGTH'),
		('TRAIT_LEADER_DOLL_MASTER', 'TRAIT_SHANGHAI_ARMIES_STRENGTH'),
		-- ('TRAIT_LEADER_DOLL_MASTER', 'TRAIT_SHANGHAI_MOVE_FAST'),
		-- ('TRAIT_LEADER_DOLL_MASTER', 'TRAIT_PENGLAI_CORPS_STRENGTH'),
		-- ('TRAIT_LEADER_DOLL_MASTER', 'TRAIT_PENGLAI_ARMIES_STRENGTH'),
		('TRAIT_LEADER_DOLL_MASTER', 'TRAIT_PENLAI_STEALTH');

					
-- Distric DOLL_HOME
-- INSERT INTO Requirements
-- 	(RequirementId, RequirementType)
-- VALUES	('REQ_POT_ADJ_DOLL_HOME', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES') ,
-- 		('REQ_POT_ADJ_DOLL_HOME_TIER2', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES') ,
-- 		('REQ_POT_ADJ_DOLL_HOME_TIER3', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES') ;


-- INSERT INTO RequirementArguments 
-- 	(RequirementId, Name, Value)
-- VALUES ('REQ_POT_ADJ_DOLL_HOME',	'DistrictType',	'DISTRICT_DOLL_HOME') ,
-- 		('REQ_POT_ADJ_DOLL_HOME',	'MaxRange', '1') ,
-- 		('REQ_POT_ADJ_DOLL_HOME',	'MinRange', '0') ,
		
-- 		('REQ_POT_ADJ_DOLL_HOME_TIER2',	'DistrictType',	'DISTRICT_DOLL_HOME') ,
-- 		('REQ_POT_ADJ_DOLL_HOME_TIER2',	'MaxRange', '2') ,
-- 		('REQ_POT_ADJ_DOLL_HOME_TIER2',	'MinRange', '1') ,	 
		
-- 		('REQ_POT_ADJ_DOLL_HOME_TIER3',	'DistrictType',	'DISTRICT_DOLL_HOME') ,
-- 		('REQ_POT_ADJ_DOLL_HOME_TIER3',	'MaxRange', '3') ,
-- 		('REQ_POT_ADJ_DOLL_HOME_TIER3',	'MinRange', '2') ;
		


-- INSERT INTO RequirementSets 
-- 	(RequirementSetId, RequirementSetType)
-- VALUES ('REQSET_POT_ADJ_DOLL_HOME', 'REQUIREMENTSET_TEST_ALL') ,

-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER2', 'REQUIREMENTSET_TEST_ALL') ,
-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER2_ERA', 'REQUIREMENTSET_TEST_ANY') ,
		
-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER3', 'REQUIREMENTSET_TEST_ALL') ,
-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER3_ERA', 'REQUIREMENTSET_TEST_ANY') ;

		
-- INSERT INTO RequirementSetRequirements
-- 	(RequirementSetId,	RequirementId)
-- VALUES	('REQSET_POT_ADJ_DOLL_HOME', 'REQ_POT_ADJ_DOLL_HOME') ,

-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER2', 'REQ_POT_ADJ_DOLL_HOME_TIER2') ,
-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER2_ERA', 'PLAYER_HAS_GOV_BUILDING_CITYSTATES_REQUIREMENT') ,
-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER2_ERA', 'PLAYER_HAS_GOV_BUILDING_FAITH_REQUIREMENT') ,
-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER2_ERA', 'PLAYER_HAS_GOV_BUILDING_SPIES_REQUIREMENT') ,
		
-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER3', 'REQ_POT_ADJ_DOLL_HOME_TIER3') ,
-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER3_ERA', 'PLAYER_HAS_GOV_BUILDING_MILITARY_REQUIREMENT') ,
-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER3_ERA', 'PLAYER_HAS_GOV_BUILDING_SCIENCE_REQUIREMENT') ,
-- 		('REQSET_POT_ADJ_DOLL_HOME_TIER3_ERA', 'PLAYER_HAS_GOV_BUILDING_CULTURE_REQUIREMENT') ;
	

INSERT INTO Modifiers 
		(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	
		-- ('DOLL_HOME_PROD', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'REQSET_POT_ADJ_DOLL_HOME') ,
		-- ('DOLL_HOME_PROD_MODIFIER', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', NULL) ,		

		-- ('DOLL_HOME_PROD_TIER2', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'REQSET_POT_ADJ_DOLL_HOME_TIER2') ,
		-- ('DOLL_HOME_PROD_TIER2_MODIFIER', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', 'REQSET_POT_ADJ_DOLL_HOME_TIER2_ERA') ,

		-- ('DOLL_HOME_PROD_TIER3', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 'REQSET_POT_ADJ_DOLL_HOME_TIER3') ,
		-- ('DOLL_HOME_PROD_TIER3_MODIFIER', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', 'REQSET_POT_ADJ_DOLL_HOME_TIER3_ERA') ,

		('DOLL_HOME_BASIC_PRODUCTION', 'MODIFIER_PLAYER_DISTRICT_ADJUST_BASE_YIELD_CHANGE', NULL) ,
		('DOLL_HOME_BASIC_CULTURE', 'MODIFIER_PLAYER_DISTRICT_ADJUST_BASE_YIELD_CHANGE', NULL) ,
		('DOLL_HOME_BASIC_SCIENCE', 'MODIFIER_PLAYER_DISTRICT_ADJUST_BASE_YIELD_CHANGE', NULL) ;

		
 
INSERT INTO ModifierArguments
		(ModifierId, Name, Value)
VALUES	
		-- ('DOLL_HOME_PROD', 'Amount', '1'),
		-- ('DOLL_HOME_PROD', 'YieldType', 'YIELD_PRODUCTION') ,
		-- ('DOLL_HOME_PROD_MODIFIER', 'ModifierId', 'DOLL_HOME_PROD')  ,
		
		-- ('DOLL_HOME_PROD_TIER2', 'Amount',  '1'),
		-- ('DOLL_HOME_PROD_TIER2', 'YieldType',  'YIELD_PRODUCTION') ,
		-- ('DOLL_HOME_PROD_TIER2_MODIFIER', 'ModifierId',  'DOLL_HOME_PROD_TIER2')  ,		
		
		-- ('DOLL_HOME_PROD_TIER3', 'Amount',  '1'),
		-- ('DOLL_HOME_PROD_TIER3', 'YieldType',  'YIELD_PRODUCTION') ,
		-- ('DOLL_HOME_PROD_TIER3_MODIFIER', 'ModifierId',  'DOLL_HOME_PROD_TIER3')  ,

		('DOLL_HOME_BASIC_PRODUCTION', 'Amount',  '2'),
		('DOLL_HOME_BASIC_PRODUCTION', 'YieldType',  'YIELD_PRODUCTION') ,
		('DOLL_HOME_BASIC_CULTURE', 'Amount',  '2'),
		('DOLL_HOME_BASIC_CULTURE', 'YieldType',  'YIELD_CULTURE') ,
		('DOLL_HOME_BASIC_SCIENCE', 'Amount',  '2'),
		('DOLL_HOME_BASIC_SCIENCE', 'YieldType',  'YIELD_SCIENCE') ;
		
	

-- 尝试用新的方式来写人偶工房的加成，范围为1，不限时代
INSERT INTO Requirements
	(RequirementId, RequirementType)
VALUES	
-- ('REQ_POT_ADJ_DOLL_HOME', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES') ;
('REQ_POT_IS_FOREST', 'REQUIREMENT_PLOT_FEATURE_TYPE_MATCHES') ;



INSERT INTO RequirementArguments 
	(RequirementId, Name, Value)
VALUES 
-- ('REQ_POT_ADJ_DOLL_HOME',	'DistrictType',	'DISTRICT_DOLL_HOME'),
-- ('REQ_POT_ADJ_DOLL_HOME',	'MaxRange',	0),
-- ('REQ_POT_ADJ_DOLL_HOME',	'MinRange',	1);
('REQ_POT_IS_FOREST',	'FeatureType',	'FEATURE_FOREST');

		

INSERT INTO RequirementSets 
	(RequirementSetId, RequirementSetType)
VALUES 
-- ('REQSET_POT_ADJ_DOLL_HOME', 'REQUIREMENTSET_TEST_ALL') ;
('REQSET_POT_IS_FOREST', 'REQUIREMENTSET_TEST_ALL') ;


		
INSERT INTO RequirementSetRequirements
	(RequirementSetId,	RequirementId)
VALUES	
-- ('REQSET_POT_ADJ_DOLL_HOME', 'REQ_POT_ADJ_DOLL_HOME') ;
('REQSET_POT_IS_FOREST', 'REQ_POT_IS_FOREST') ;


INSERT INTO Modifiers 
		(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES	
		-- ('DOLL_HOME_PROD', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'REQSET_POT_ADJ_DOLL_HOME');
		('DOLL_HOME_PROD', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'REQSET_POT_IS_FOREST');

INSERT INTO ModifierArguments 
		(ModifierId, Name, Value)
VALUES	
		('DOLL_HOME_PROD', 'YieldType', 'YIELD_PRODUCTION'),
		('DOLL_HOME_PROD', 'Amount', 1);

INSERT INTO TraitModifiers
		(TraitType, ModifierId)
VALUES	('TRAIT_LEADER_DOLL_MASTER',	'DOLL_HOME_PROD') ;
		-- ('TRAIT_LEADER_DOLL_MASTER',	'DOLL_HOME_PROD_TIER2') ,
		-- ('TRAIT_LEADER_DOLL_MASTER',	'DOLL_HOME_PROD_TIER3') ;


INSERT INTO DistrictModifiers
		(DistrictType, ModifierId)
VALUES	('DISTRICT_DOLL_HOME',	'DOLL_HOME_BASIC_PRODUCTION') ,
		('DISTRICT_DOLL_HOME',	'DOLL_HOME_BASIC_CULTURE') ,
		('DISTRICT_DOLL_HOME',	'DOLL_HOME_BASIC_SCIENCE') ;

-- Great People
-- KIRISAME_MARISA(DIPLOMAT)
INSERT INTO Modifiers 
		(ModifierId, ModifierType, RunOnce, Permanent, SubjectRequirementSetId)
VALUES	
		('DIPLOMAT_KIRISAME_MARISA_ACTIVE_DIPLOMATIC_GOVERNMENT_SLOT', 'MODIFIER_PLAYER_CULTURE_ADJUST_GOVERNMENT_SLOTS_MODIFIER', 1, 1, NULL) ,
		('DIPLOMAT_KIRISAME_MARISA_ACTIVE_THREE_INFLUENCE_TOKENS', 'MODIFIER_PLAYER_GRANT_INFLUENCE_TOKEN', 1, 1, NULL) ,

INSERT INTO ModifierArguments 
		(ModifierId, Name, Value)
VALUES	
		('DIPLOMAT_KIRISAME_MARISA_ACTIVE_DIPLOMATIC_GOVERNMENT_SLOT', 'GovernmentSlotType', 'SLOT_DIPLOMATIC'),
		('DIPLOMAT_KIRISAME_MARISA_ACTIVE_THREE_INFLUENCE_TOKENS', 'Amount', 3);

-- KIRISAME_MARISA(SPY)
INSERT INTO Modifiers 
		(ModifierId, ModifierType, RunOnce, Permanent, SubjectRequirementSetId)
VALUES	
		('MARISA_SPY_CHOOSE_SKILL', 'MODIFIER_PLAYER_UNIT_GRANT_UNLIMITED_PROMOTION_CHOICES', 0, 0, NULL) ,
		('MARISA_SPY_ACTIVE_ADD_SPY_CAPACITY', 'MODIFIER_PLAYER_GRANT_SPY', 1, 1, NULL) ,
		('MARISA_SPY_ACTIVE_ADD_SPY_MARISA', 'MODIFIER_PLAYER_GRANT_UNIT_IN_CAPITAL', 1, 1, NULL) ,
		('MARISA_SPY_ACTIVE_MARISA_LEVEL_UP', 'MODIFIER_PLAYER_UNITS_ADJUST_GRANT_EXPERIENCE', 1, 1, 'UNIT_IS_SPY') ;

INSERT INTO ModifierArguments 
		(ModifierId, Name, Value)
VALUES	
		('MARISA_SPY_CHOOSE_SKILL', 'UnitType', 'UNIT_SPY'),
		('MARISA_SPY_ACTIVE_ADD_SPY_CAPACITY', 'AllowUniqueOverride', 0),
		('MARISA_SPY_ACTIVE_ADD_SPY_MARISA', 'Amount', 1),
		('MARISA_SPY_ACTIVE_ADD_SPY_MARISA', 'Amount', 3),
		('MARISA_SPY_ACTIVE_ADD_SPY_MARISA', 'UnitType', 'UNIT_SPY'),
		('MARISA_SPY_ACTIVE_MARISA_LEVEL_UP', 'Amount', -1);

-- God SHENQI
CREATE TABLE IF NOT EXISTS HiddenStrategics AS 
	SELECT ResourceType FROM Resources 
	WHERE ResourceClassType="RESOURCECLASS_STRATEGIC" AND PrereqTech IS NOT NULL ;


INSERT INTO Modifiers 
	(ModifierId, 	ModifierType, 	RunOnce, Permanent, OwnerRequirementSetId, SubjectRequirementSetId)
SELECT	'ALICE_PLAYER_CAN_SEE' || HiddenStrategics.ResourceType, 	'MODIFIER_PLAYER_GRANT_FREE_RESOURCE_VISIBILITY', 1, 1, NULL, NULL
	FROM HiddenStrategics;


INSERT INTO ModifierArguments
	(ModifierId, Name, Value)
SELECT 'ALICE_PLAYER_CAN_SEE' || HiddenStrategics.ResourceType, 'ResourceType', HiddenStrategics.ResourceType	
	FROM HiddenStrategics;

INSERT INTO TraitModifiers
	(TraitType, ModifierId)
SELECT 'TRAIT_MAGIC_POWER', 'ALICE_PLAYER_CAN_SEE' || HiddenStrategics.ResourceType
	FROM HiddenStrategics;

-- 可以修建任何改良设施(建议放到最后面以避免游戏崩溃233)
INSERT INTO Modifiers 
		(ModifierId, ModifierType, RunOnce, Permanent, OwnerRequirementSetId, SubjectRequirementSetId)
SELECT 'ALICE_PLAYER_CAN_BUILD_' || ImprovementType, 'MODIFIER_PLAYER_ADJUST_VALID_IMPROVEMENT', 0, 0, NULL, NULL
FROM Improvements;

INSERT INTO ModifierArguments
		(ModifierId, Name, Value)
SELECT 'ALICE_PLAYER_CAN_BUILD_' || ImprovementType, 'ImprovementType', ImprovementType
FROM Improvements;

INSERT INTO TraitModifiers
		(TraitType, ModifierId)
SELECT 'TRAIT_LEADER_DOLL_MASTER', 'ALICE_PLAYER_CAN_BUILD_' || ImprovementType
FROM Improvements;


INSERT INTO Modifiers 
		(ModifierId, ModifierType, RunOnce, Permanent, SubjectRequirementSetId)
VALUES	
		('SHENQI_GOD_ACTIVE_THREE_RELIC', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, NULL) ,
		('SHENQI_GOD_ACTIVE_RELIC_TOURISM_MODIFIER', 'MODIFIER_PLAYER_CITIES_ADJUST_TOURISM', 1, 1, NULL) ,
		('SHENQI_GOD_ACTIVE_RELIC_CULTURE_BONUS', 'MODIFIER_SINGLE_CITY_GRANT_YIELD_PER_GREAT_WORK', 1, 1, NULL) ,
		('SHENQI_GOD_ACTIVE_RELIC_SCIENCE_BONUS', 'MODIFIER_SINGLE_CITY_GRANT_YIELD_PER_GREAT_WORK', 1, 1, NULL) ;


INSERT INTO ModifierArguments 
		(ModifierId, Name, Value)
VALUES	
		('SHENQI_GOD_ACTIVE_THREE_RELIC', 'Amount', '3'),
		('SHENQI_GOD_ACTIVE_RELIC_TOURISM_MODIFIER', 'GreatWorkObjectType', 'GREATWORKOBJECT_RELIGIOUS'),
		('SHENQI_GOD_ACTIVE_RELIC_TOURISM_MODIFIER', 'ScalingFactor', 300),

		('SHENQI_GOD_ACTIVE_RELIC_CULTURE_BONUS', 'GreatWorkObjectType', 'GREATWORKOBJECT_RELIGIOUS'),
		('SHENQI_GOD_ACTIVE_RELIC_CULTURE_BONUS', 'YieldType', 'YIELD_CULTURE'),
		('SHENQI_GOD_ACTIVE_RELIC_CULTURE_BONUS', 'Amount', 250),

		('SHENQI_GOD_ACTIVE_RELIC_SCIENCE_BONUS', 'GreatWorkObjectType', 'GREATWORKOBJECT_RELIGIOUS'),
		('SHENQI_GOD_ACTIVE_RELIC_SCIENCE_BONUS', 'YieldType', 'YIELD_SCIENCE'),
		('SHENQI_GOD_ACTIVE_RELIC_SCIENCE_BONUS', 'Amount', 250);



-- 测试用代码
UPDATE Building_YieldChanges 
SET YieldChange = 30
WHERE BuildingType = 'BUILDING_PALACE';



-- 这里要绑定的是神绮的激活能力1
-- INSERT INTO TraitModifiers
-- 	(TraitType, 		ModifierId)
-- SELECT 'TRAIT_CIVILIZATION_MAPUCHE_TOQUI',	'ALICE_PLAYER_CAN_SEE' || HiddenStrategics.ResourceType 
-- 	FROM HiddenStrategics;